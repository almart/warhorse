---
- name: Generate Terraform provider configuration
  template:
    src: terraform_provider.tf.j2
    dest: "{{ terraform_path }}/provider.tf"
    variables:
      warhorse: "{{ warhorse }}"

- ansible.builtin.include_tasks: deploy.yml
  vars:
    state: "present"
    name: "Deploy"
  when: deploy

- ansible.builtin.include_tasks: destroy.yml
  vars:
    state: "absent"
    name: "Destroy"
  when: not deploy
